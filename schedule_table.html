<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>æ’ç­è¡¨æ ¼è§†å›¾ - æŠ—èŒå®éªŒç³»ç»Ÿ</title>

<style>
:root{
    --primary:#2E7D32;
    --primary-light:#A5D6A7;
    --bg:#F5F7FA;
    --text:#263238;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",å¾®è½¯é›…é»‘,sans-serif;
    background:var(--bg);
    color:var(--text);
}
header{
    background:white;
    padding:16px 40px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:1px solid #DDD;
}
nav a{
    margin-left:16px;
    text-decoration:none;
    color:var(--text);
    padding:6px 10px;
    border-radius:999px;
}
nav a:hover{
    background:var(--primary-light);
    color:white;
}
main{
    max-width:1200px;
    margin:24px auto;
    padding:0 16px;
}
h2{
    color:var(--primary);
    margin:20px 0 10px;
}

table{
    width:100%;
    border-collapse:collapse;
    background:white;
    box-shadow:0 2px 6px rgba(0,0,0,0.05);
    border-radius:12px;
    overflow:hidden;
}
th,td{
    border:1px solid #E0E0E0;
    padding:10px;
    text-align:center;
    font-size:14px;
}
th{
    background:#E8F5E9;
    font-weight:600;
}
.status-btn{
    padding:4px 10px;
    border-radius:8px;
    cursor:pointer;
    color:white;
    font-size:13px;
}
.status-æœªå¼€å§‹{background:#9CA3AF;}
.status-è¿›è¡Œä¸­{background:#2563EB;}
.status-å·²å®Œæˆ{background:#10B981;}
</style>
</head>

<body>

<header>
    <h1>å®éªŒæ’ç­ï¼ˆè¡¨æ ¼è§†å›¾ï¼‰</h1>
    <nav>
        <a href="index.html">é¦–é¡µ</a>
        <a href="schedule.html">çœ‹æ¿è§†å›¾</a>
        <a href="schedule_table.html">æ’ç­è¡¨æ ¼</a>
        <a href="layout.html">å®éªŒå¸ƒå±€</a>
        <a href="entry.html">æ•°æ®å½•å…¥</a>
        <a href="sop.html">SOP</a>
    </nav>
</header>

<main>

<h2>ğŸ“„ ç¬¬ 1 å‘¨æ’ç­</h2>
<table id="table1">
    <thead>
        <tr>
            <th>æ—¥æœŸ</th>
            <th>æ—¶é—´</th>
            <th>ä»»åŠ¡å†…å®¹</th>
            <th>å¤‡æ³¨</th>
            <th>çŠ¶æ€</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<h2>ğŸ“„ ç¬¬ 2 å‘¨æ’ç­</h2>
<table id="table2">
    <thead>
        <tr>
            <th>æ—¥æœŸ</th>
            <th>æ—¶é—´</th>
            <th>ä»»åŠ¡å†…å®¹</th>
            <th>å¤‡æ³¨</th>
            <th>çŠ¶æ€</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

</main>


<script>
// ================ LocalStorage è¯»å– =================== //
const LS_KEY = "SCHEDULE_TASKS";

function loadTasks(){
    const saved = localStorage.getItem(LS_KEY);
    if(saved){
        return JSON.parse(saved);
    }
    return { week1:[],week2:[] };
}

function saveTasks(){
    localStorage.setItem(LS_KEY, JSON.stringify(tasks));
}

const tasks = loadTasks();


// ================ æ¸²æŸ“è¡¨æ ¼ =================== //

function renderTable(tableId, listName){
    const tbody = document.querySelector(`#${tableId} tbody`);
    tbody.innerHTML = "";

    tasks[listName].forEach((task, i)=>{
        const tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${task.date}</td>
            <td>${task.time}</td>
            <td>${task.title}</td>
            <td>${task.note}</td>
            <td>
                <span class="status-btn status-${task.status}" onclick="toggleStatus('${listName}',${i})">
                    ${task.status}
                </span>
            </td>
        `;

        tbody.appendChild(tr);
    });
}


// ================ çŠ¶æ€åˆ‡æ¢ =================== //
function toggleStatus(listName, index){
    const order = ["æœªå¼€å§‹","è¿›è¡Œä¸­","å·²å®Œæˆ"];
    const cur = tasks[listName][index].status;
    tasks[listName][index].status = order[(order.indexOf(cur)+1)%3];

    saveTasks();
    renderTable("table1","week1");
    renderTable("table2","week2");
}


// åˆæ¬¡æ¸²æŸ“
renderTable("table1","week1");
renderTable("table2","week2");

</script>

</body>
</html>
