<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>实验布局预览 - 抗菌实验系统</title>

<style>
    :root{
        --primary:#2E7D32;
        --primary-light:#A5D6A7;
        --bg:#F5F7FA;
        --text:#263238;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    body{
        font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",微软雅黑,sans-serif;
        background:var(--bg);
        color:var(--text);
        padding-bottom:60px;
    }

    header{
        background:white;
        padding:16px 40px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        border-bottom:1px solid #DDD;
    }
    nav a{
        margin-left:16px;
        text-decoration:none;
        color:var(--text);
        padding:6px 10px;
        border-radius:999px;
    }
    nav a:hover{
        background:var(--primary-light);
        color:white;
    }

    .container{
        max-width:1200px;
        margin:20px auto;
        padding:10px 20px;
    }

    h2{
        margin:30px 0 15px;
        color:var(--primary);
        font-size:22px;
    }

    /* 平板布局表格 */
    table{
        width:100%;
        border-collapse:collapse;
        background:white;
        border-radius:10px;
        overflow:hidden;
        margin-bottom:20px;
        font-size:14px;
    }
    th, td{
        border:1px solid #E0E0E0;
        padding:8px;
        text-align:center;
    }
    th{
        background:#E8F5E9;
    }

    /* MIC 配液表 */
    .mic-box{
        margin-top:40px;
        padding:20px;
        background:white;
        border-radius:12px;
        box-shadow:0 2px 6px rgba(0,0,0,.08);
    }
</style>
</head>

<body>

<header>
    <h1>实验布局预览</h1>
    <nav>
        <a href="index.html">首页</a>
        <a href="schedule.html">实验排班</a>
        <a href="schedule_table.html">排班表格</a>
        <a href="layout.html">实验布局</a>
        <a href="entry.html">数据录入</a>
        <a href="sop.html">SOP</a>
    </nav>
</header>

<div class="container">

<!-- ========================== 1. 抑菌圈平板布局 ========================== -->
<h2>生成抑菌圈平板布局（9 植物 × 4 菌 × 3 重复）</h2>

<div id="plateArea"></div>

<script>
const plants = [
    "薄荷","迷迭香","柠檬皮","橙子皮",
    "桑叶","枇杷叶","绿茶","干槐花","芦荟"
];
const repeats = ["R1","R2","R3"];
const strains = ["EC","BS","AS","PS"];

/* 生成 32 块平板（每菌种 8 块 × 4 菌种） */
function renderPlates() {
    let html = "";

    strains.forEach(strain=>{
        html += `<h3 style="margin:20px 0 10px;">菌株：${strain}</h3>`;
        html += `<table><thead><tr>
                    <th>Plate</th><th>孔1</th><th>孔2</th><th>孔3</th><th>孔4</th>
                 </tr></thead><tbody>`;

        let ptr = 0, rpt = 0;

        for(let i=1;i<=8;i++){
            html += `<tr><td>${strain}-${i}</td>`;

            if(i===8){
                html += `<td>阴性</td><td>阳性</td><td>空</td><td>空</td>`;
            } else {
                for(let c=0;c<4;c++){
                    if(ptr>=plants.length){ ptr=0; rpt++; }
                    html += `<td>${plants[ptr]}-${repeats[rpt]}</td>`;
                    ptr++;
                }
            }

            html += `</tr>`;
        }

        html += `</tbody></table>`;
    });

    document.getElementById("plateArea").innerHTML = html;
}
renderPlates();
</script>


<!-- ========================== 2. MIC 板布局（可视化） ========================== -->
<h2>96 孔 MIC 布局（自动生成）</h2>

<div id="micArea"></div>

<script>
function renderMIC() {
    let html = "";

    strains.forEach(strain=>{
        html += `<h3 style="margin:20px 0 10px;">菌株：${strain}</h3>`;

        html += `
        <table>
            <thead>
                <tr>
                    <th>Row</th>
                    ${Array.from({length:12}, (_,i)=>`<th>${i+1}</th>`).join('')}
                </tr>
            </thead>
            <tbody>
        `;

        const rows = ["A","B","C","D","E"]; // 5 行
        for(let block=0; block<2; block++){
            rows.forEach((row, rIndex) => {
                let plant = plants[rIndex + block*5];
                html += `<tr><td>${row}</td>`;

                // 1-8 为 C1~C8
                for(let c=1;c<=8;c++){
                    html += `<td>${plant}_C${c}</td>`;
                }

                // 9-12 为对照
                html += `
                    <td>空白</td>
                    <td>生长对照</td>
                    <td>溶剂对照</td>
                    <td>阳性药</td>
                `;
                html += `</tr>`;
            });
        }

        html += `</tbody></table>`;
    });

    document.getElementById("micArea").innerHTML = html;
}
renderMIC();
</script>


<!-- ========================== 3. MIC 自动配液表 ========================== -->
<div class="mic-box">
<h2>MIC 自动配液表（2×稀释体系）</h2>

<div id="mixTable"></div>

<script>
function renderMix() {
    const dil = [
        {label:"C1", e:200, m:0},
        {label:"C2", e:100, m:100},
        {label:"C3", e:50,  m:150},
        {label:"C4", e:25,  m:175},
        {label:"C5", e:13,  m:187},
        {label:"C6", e:6,   m:194},
        {label:"C7", e:3,   m:197},
        {label:"C8", e:2,   m:198},
    ];

    let html = `<table><thead><tr><th>植物</th>`;
    dil.forEach(d=> html+=`<th>${d.label}</th>`);
    html+=`</tr></thead><tbody>`;

    plants.forEach(p=>{
        html+=`<tr><td>${p}</td>`;
        dil.forEach(d=>{
            html+=`<td>${d.e}µL + ${d.m}µL</td>`;
        });
        html+=`</tr>`;
    });

    html+=`</tbody></table>`;
    document.getElementById("mixTable").innerHTML = html;
}
renderMix();
</script>

</div>

</div><!-- container end -->

</body>
</html>
