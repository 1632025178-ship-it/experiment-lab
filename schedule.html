<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>å®éªŒæ’ç­ç®¡ç†</title>

<style>
body{
    font-family: "Segoe UI","å¾®è½¯é›…é»‘";
    background:#F8FAF9;
    margin:0;
    padding:30px;
    color:#222;
}

h1{color:#2E7D32;}

table{
    width:100%;
    border-collapse:collapse;
    margin-top:10px;
    background:white;
    border-radius:10px;
    overflow:hidden;
}

table th{
    background:#2E7D32;
    padding:12px;
    color:white;
    font-weight:600;
}
table td{
    border-bottom:1px solid #ddd;
    padding:12px;
}

.task-row:hover{
    background:#E9F5EA;
    cursor:pointer;
}

.btn{
    padding:8px 12px;
    border-radius:6px;
    border:none;
    color:white;
    background:#2E7D32;
    margin-right:4px;
}
.btn-edit{background:#0277BD;}
.btn-danger{background:#C62828;}
.btn-save{background:#558B2F;}

.status-pill{
    padding:4px 12px;
    border-radius:14px;
    color:white;
    font-size:13px;
}

.input{
    padding:6px 8px;
    border:1px solid #ccc;
    border-radius:6px;
    margin:4px;
}

#formBox{
    margin-top:25px;
    background:white;
    padding:12px;
    border-radius:10px;
    border:1px solid #bbb;
}
</style>
</head>

<body>

<h1>ğŸ§ª æŠ—èŒå®éªŒæ’ç­ç®¡ç†ç³»ç»Ÿ</h1>

<!-- åˆ‡æ¢æŒ‰é’® -->
<div style="margin-bottom:20px;">
    <button class="btn" onclick="showView('interactive')">äº¤äº’æ’ç­æ¨¡å¼</button>
    <button class="btn" onclick="showView('overview')">å‘¨è§†å›¾æ€»è§ˆæ¨¡å¼</button>
</div>

<!-- ====== è§†å›¾ Aï¼šäº¤äº’å¼ç®¡ç†æ¨¡å¼ ====== -->
<div id="interactiveView">
    <p>ç‚¹å‡»ä»»åŠ¡å¯åˆ‡æ¢çŠ¶æ€ï¼šæœªå¼€å§‹ â†’ è¿›è¡Œä¸­ â†’ å·²å®Œæˆ</p>

    <table>
    <thead>
    <tr>
        <th>æ—¥æœŸ</th>
        <th>æ—¶é—´</th>
        <th>å®éªŒå†…å®¹</th>
        <th>çŠ¶æ€</th>
        <th>æ“ä½œ</th>
    </tr>
    </thead>
    <tbody id="taskTable"></tbody>
    </table>

    <div id="formBox">
    <h3>â• æ–°å¢ä»»åŠ¡</h3>
    æ—¥æœŸï¼š<input id="newDate" class="input">
    æ—¶é—´ï¼š<input id="newTime" class="input">
    å†…å®¹ï¼š<input id="newTitle" class="input" style="width:240px">
    ä¾èµ–IDï¼ˆå¯ç©ºï¼‰ï¼š<input id="newDep" class="input" style="width:60px">
    <button class="btn" onclick="addTask()">æ·»åŠ ä»»åŠ¡</button>
    </div>
</div>

<!-- ====== è§†å›¾ Bï¼šæ€»è§ˆè§†å›¾ ====== -->
<div id="overviewView" style="display:none;">
    <h3>ğŸ“Œ å…¨éƒ¨å®éªŒä»»åŠ¡æ€»è§ˆ</h3>

    <table>
    <tr><th>å‘¨æ¬¡</th><th>æ—¥æœŸ</th><th>æ—¶é—´æ®µ</th><th>å®éªŒå†…å®¹</th></tr>

    <tr><td rowspan="7">ç¬¬ 1 å‘¨</td><td>å‘¨ä¸‰</td><td>14:00â€“18:30</td><td>4ç§èŒæ ªå¤è‹ + 10ç§æ¤ç‰©ç¼–å· + å¯åŠ¨çƒ˜å¹²</td></tr>
    <tr><td>å‘¨å››</td><td>9:00â€“12:00</td><td>æ£€æŸ¥èŒæ¶²çŠ¶æ€ã€çƒ˜å¹²è¿›åº¦</td></tr>
    <tr><td>å‘¨å››</td><td>14:00â€“17:00</td><td>é¦–æ‰¹æ¤ç‰©ç ”ç£¨ + ä¹™é†‡æµ¸æ</td></tr>
    <tr><td>å‘¨äº”</td><td>9:00â€“12:00</td><td>ç¬¬äºŒæ‰¹æ¤ç‰©æµ¸æ</td></tr>
    <tr><td>å‘¨äº”</td><td>13:00â€“17:00</td><td>ç¬¬ä¸€æ‰¹æ ·å“æ—‹è’¸</td></tr>
    <tr><td>å‘¨å…­</td><td>9:00â€“12:00</td><td>è¡¥å……å‰©ä½™èƒå–</td></tr>
    <tr><td>å‘¨æ—¥</td><td>9:00â€“13:00</td><td>ç¬¬äºŒæ‰¹æ—‹è’¸ + å®šå®¹</td></tr>

    <tr><td rowspan="7">ç¬¬ 2 å‘¨</td><td>å‘¨ä¸€</td><td>9:00â€“12:00</td><td>èŒæ¶²æ ‡å‡†åŒ– + å­¢å­åˆ¶å¤‡</td></tr>
    <tr><td>å‘¨ä¸€</td><td>14:00â€“17:00</td><td>æ£€æŸ¥æ¤ç‰©æå–æ¶²çŠ¶æ€</td></tr>
    <tr><td>å‘¨äºŒ</td><td>9:00â€“12:00</td><td>æµ‡æ³¨æŠ‘èŒåœˆå¹³æ¿</td></tr>
    <tr><td>å‘¨ä¸‰</td><td>14:00â€“18:30</td><td>æŠ‘èŒåœˆå¸ƒæ¿ + MICé…ç½®</td></tr>
    <tr><td>å‘¨å››</td><td>10:00â€“13:00</td><td>è¯»å–ç»†èŒæŠ‘èŒåœˆ</td></tr>
    <tr><td>å‘¨äº”</td><td>9:00â€“12:00</td><td>çœŸèŒæŠ‘èŒåœˆ + MICå‰©ä½™æ¿</td></tr>
    <tr><td>å‘¨æ—¥</td><td>13:00â€“17:00</td><td>è¯»å– MIC ç»“æœ + æ•´ç†</td></tr>
    </table>
</div>

<script>
function showView(view){
    document.getElementById("interactiveView").style.display =
        (view==="interactive")?"block":"none";

    document.getElementById("overviewView").style.display =
        (view==="overview")?"block":"none";
}
</script>

<script>
/* è¿™é‡Œä¿ç•™ä½ ç°æœ‰çš„æ’ç­ JS å³å¯ï¼Œæ— éœ€ä¿®æ”¹ */
/* cycleStatus / render / addTask / delete / edit ç­‰å‡½æ•°ç…§å¸¸è¿è¡Œ */
</script>

</body>

<script>
let tasks = [
    // ç¬¬ 1 å‘¨
    {id:1,date:"å‘¨ä¸‰",time:"14:00â€“18:30",title:"4ç§èŒæ ªå¤è‹ + 10ç§æ¤ç‰©æ¸…æ´—ç¼–å·",status:"pending"},
    {id:2,date:"å‘¨å››",time:"9:00â€“12:00",title:"æ£€æŸ¥èŒæ¶²çŠ¶æ€ã€çƒ˜å¹²è¿›åº¦",status:"pending",dependency:1},
    {id:3,date:"å‘¨å››",time:"14:00â€“17:00",title:"é¦–æ‰¹æ¤ç‰©ç ”ç£¨ + ä¹™é†‡æµ¸æ",status:"pending",dependency:2},
    {id:4,date:"å‘¨äº”",time:"9:00â€“12:00",title:"ç¬¬äºŒæ‰¹æ¤ç‰©æµ¸æ",status:"pending",dependency:3},
    {id:5,date:"å‘¨äº”",time:"13:00â€“17:00",title:"ç¬¬ä¸€æ‰¹æ—‹è’¸æµ“ç¼©",status:"pending",dependency:4},
    {id:6,date:"å‘¨å…­",time:"9:00â€“12:00",title:"è¡¥å……å‰©ä½™èƒå–",status:"pending",dependency:5},
    {id:7,date:"å‘¨æ—¥",time:"9:00â€“13:00",title:"ç¬¬äºŒæ‰¹æ—‹è’¸ + å®šå®¹30%EtOH",status:"pending",dependency:6},

    // ç¬¬ 2 å‘¨
    {id:8,date:"å‘¨ä¸€",time:"9:00â€“12:00",title:"èŒæ¶²æ ‡å‡†åŒ– + å­¢å­åˆ¶å¤‡",status:"pending",dependency:7},
    {id:9,date:"å‘¨ä¸€",time:"14:00â€“17:00",title:"æ£€æŸ¥æ¤ç‰©æå–æ¶²çŠ¶æ€",status:"pending"},
    {id:10,date:"å‘¨äºŒ",time:"9:00â€“12:00",title:"æµ‡æ³¨æŠ‘èŒåœˆå¹³æ¿ï¼ˆ32å—ï¼‰",status:"pending",dependency:8},
    {id:11,date:"å‘¨ä¸‰",time:"14:00â€“18:30",title:"æŠ‘èŒåœˆå¸ƒæ¿ + MICé…ç½®",status:"pending",dependency:10},
    {id:12,date:"å‘¨å››",time:"10:00â€“13:00",title:"è¯»å–ç»†èŒæŠ‘èŒåœˆ",status:"pending",dependency:11},
    {id:13,date:"å‘¨äº”",time:"9:00â€“12:00",title:"çœŸèŒæŠ‘èŒåœˆ + MICå‰©ä½™æ¿",status:"pending",dependency:12},
    {id:14,date:"å‘¨æ—¥",time:"13:00â€“17:00",title:"è¯»å–å…¨éƒ¨MICç»“æœ + æ•´ç†",status:"pending",dependency:13},
];

let editing = null;

function addTask(){
    const d=newDate.value,t=newTime.value,c=newTitle.value;
    const dep=parseInt(newDep.value);

    if(!d||!t||!c){alert("è¯·å¡«å†™å®Œæ•´ï¼");return;}

    tasks.push({
        id:Date.now(),
        date:d,
        time:t,
        title:c,
        status:"pending",
        dependency:isNaN(dep)? null:dep
    });

    newDate.value=newTime.value=newTitle.value=newDep.value="";
    render();
}

function removeTask(id){
    tasks=tasks.filter(t=>t.id!==id);
    render();
}

function cycleStatus(id){
    let t=tasks.find(x=>x.id===id);
    if(t.dependency){
        let dep=tasks.find(x=>x.id===t.dependency);
        if(dep.status!=="completed"){
            alert("âš  å¿…é¡»å…ˆå®Œæˆå‰ç½®ä»»åŠ¡ï¼š"+dep.title);
            return;
        }
    }

    if(t.status==="pending")t.status="doing";
    else if(t.status==="doing")t.status="completed";
    else t.status="pending";

    render();
}

function editTask(id){editing=id;render();}

function saveEdit(id){
    let row=document.querySelector(`#row-${id}`);
    let cells=row.querySelectorAll("input");
    const [date,time,title,dep]=cells;

    let t=tasks.find(x=>x.id===id);
    t.date=date.value;
    t.time=time.value;
    t.title=title.value;
    t.dependency=dep.value?parseInt(dep.value):null;

    editing=null;
    render();
}

function statusStyle(s){
    if(s==="pending")return"background:gray";
    if(s==="doing")return"background:#0277BD";
    return"background:#2E7D32";
}

function showStatus(s){
    if(s==="pending")return"æœªå¼€å§‹";
    if(s==="doing")return"è¿›è¡Œä¸­";
    return"å·²å®Œæˆ";
}

function render(){
    document.getElementById("taskTable").innerHTML=
    tasks.map(t=>{
        if(editing===t.id){
            return `
            <tr id="row-${t.id}">
            <td><input class="input" value="${t.date}"></td>
            <td><input class="input" value="${t.time}"></td>
            <td><input class="input" value="${t.title}" style="width:240px"></td>
            <td><span class="status-pill" style="${statusStyle(t.status)}">${showStatus(t.status)}</span></td>
            <td>
                ä¾èµ–ï¼š<input class="input" style="width:60px" value="${t.dependency||""}">
                <button class="btn-save" onclick="saveEdit(${t.id})">ä¿å­˜</button>
            </td>
            </tr>`;
        }

        return `
        <tr id="row-${t.id}" class="task-row">
            <td>${t.date}</td>
            <td>${t.time}</td>
            <td onclick="cycleStatus(${t.id})">
            ${t.title}
            ${t.dependency?`<br><small style="color:#666">ä¾èµ–#${t.dependency}</small>`:""}
            </td>
            <td><span class="status-pill" style="${statusStyle(t.status)}">${showStatus(t.status)}</span></td>
            <td>
                <button class="btn-edit" onclick="editTask(${t.id})">ç¼–è¾‘</button>
                <button class="btn-danger" onclick="removeTask(${t.id})">åˆ é™¤</button>
            </td>
        </tr>`;
    }).join("");
}

render();
</script>
</body>
</html>
